<%#
# New

This view is the template for the "new resource" page.
It displays a header, and then renders the `_form` partial
to do the heavy lifting.

## Local variables:

- `page`:
  An instance of [Administrate::Page::Form][1].
  Contains helper methods to help display a form,
  and knows which attributes should be displayed in the resource's form.

[1]: http://www.rubydoc.info/gems/administrate/Administrate/Page/Form
%>

<% content_for(:title) do %>
  <%= t(
    "administrate.actions.new_resource",
    name: display_resource_name(page.resource_name).titleize
  ) %>
<% end %>

<header class="main-content__header" role="banner">
  <h1 class="main-content__page-title">
    <%= content_for(:title) %>
  </h1>

  <div>
    <%= link_to t("administrate.actions.back"), :back, class: "button" %>
  </div>
</header>

<section class="main-content__body">


  <%= form_for([namespace, page.resource], html: { class: "form" }) do |f| %>
    <% if page.resource.errors.any? %>
      <div id="error_explanation">
        <h2>
          <%= t(
            "administrate.form.errors",
            pluralized_errors: pluralize(page.resource.errors.count, t("administrate.form.error")),
            resource_name: display_resource_name(page.resource_name)
          ) %>
        </h2>

        <ul>
          <% page.resource.errors.full_messages.each do |message| %>
            <li class="flash-error"><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <% page.attributes.each do |attribute| -%>

      <% if attribute.name === 'total_amount' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, placeholder: "in cents ($25 = 2500)"  %>
          </div>
        </div>

      <% elsif attribute.name === 'transaction_type' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, value: "ManualEntry"  %>
          </div>
        </div>

      <% elsif attribute.name === 'transaction_status' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, value: "1" %>
          </div>
        </div>

      <% elsif attribute.name === 'transaction_id' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, value: ((Time.now).strftime("%Y%m%d%H%M%S#{current_user.email.split("@").first}")) %>
          </div>
        </div>

      <% elsif attribute.name === 'transaction_date' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, value: Time.now.to_s %>
          </div>
        </div>

      <% elsif attribute.name === 'timestamp' %>
        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <div class="field-unit__label">
            <%= f.label attribute.attribute %>
          </div>
          <div class="field-unit__field">
            <%= f.text_field attribute.attribute, value: ((Time.now.to_i).to_s) %>
          </div>
        </div>

      <% else %>

        <div class="field-unit field-unit--<%= attribute.html_class %>">
          <%= render_field attribute, f: f %>
        </div>

      <% end %>

    <% end -%>

    <div class="form-actions">
      <%= f.submit %>
    </div>
  <% end %>






</section>
